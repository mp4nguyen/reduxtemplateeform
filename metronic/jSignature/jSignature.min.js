!function(){function a(a){for(var b,d,c=a.css("color"),a=a[0],e=!1;a&&!d&&!e;){try{b=$(a).css("background-color")}catch(a){b="transparent"}"transparent"!==b&&"rgba(0, 0, 0, 0)"!==b&&(d=b),e=a.body,a=a.parentNode}var f,a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,e=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;b=void 0,(b=c.match(a))?f={r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}:(b=c.match(e))&&(f={r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)});var g;return d?(b=void 0,(b=d.match(a))?g={r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}:(b=d.match(e))&&(g={r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)})):g=f&&127<Math.max.apply(null,[f.r,f.g,f.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},b=function(a){return"rgb("+[a.r,a.g,a.b].join(", ")+")"},f&&g?(a=Math.max.apply(null,[f.r,f.g,f.b]),f=Math.max.apply(null,[g.r,g.g,g.b]),f=Math.round(f+-.75*(f-a)),f={r:f,g:f,b:f}):f?(f=Math.max.apply(null,[f.r,f.g,f.b]),a=1,127<f&&(a=-1),f=Math.round(f+96*a),f={r:f,g:f,b:f}):f={r:191,g:191,b:191},{color:c,"background-color":g?b(g):d,"decor-color":b(f)}}function b(a,b){this.x=a,this.y=b,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var c=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*c(this.y);else if(0===this.y)this._length=a,this.x=a*c(this.x);else{var b=Math.abs(this.y/this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a,this.x=d*c(this.x),this.y=b*c(this.y)}return this},this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/b,-1),1))/Math.PI}}function c(a,c){this.x=a,this.y=c,this.getVectorToCoordinates=function(a,c){return new b(a-this.x,c-this.y)},this.getVectorFromCoordinates=function(a,b){return this.getVectorToCoordinates(a,b).reverse()},this.getVectorToPoint=function(a){return new b(a.x-this.x,a.y-this.y)},this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function d(a,b,c,d,e){if(this.data=a,this.context=b,a.length)for(var g,h,f=a.length,i=0;i<f;i++)if((g=a[i])&&g.x){h=g.x.length,c.call(b,g);for(var j=1;j<h;j++)d.call(b,g,j);e.call(b,g)}this.changed=function(){},this.startStrokeFn=c,this.addToStrokeFn=d,this.endStrokeFn=e,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(a){if(a&&"number"==typeof a.x&&"number"==typeof a.y){this._stroke={x:[a.x],y:[a.y]},this.data.push(this._stroke),this._lastPoint=a,this.inStroke=!0;var b=this._stroke,c=this.startStrokeFn,d=this.context;return setTimeout(function(){c.call(d,b)},3),a}return null},this.addToStroke=function(a){if(this.inStroke&&"number"==typeof a.x&&"number"==typeof a.y&&4<Math.abs(a.x-this._lastPoint.x)+Math.abs(a.y-this._lastPoint.y)){var b=this._stroke.x.length;this._stroke.x.push(a.x),this._stroke.y.push(a.y),this._lastPoint=a;var c=this._stroke,d=this.addToStrokeFn,e=this.context;return setTimeout(function(){d.call(e,c,b)},3),a}return null},this.endStroke=function(){var a=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,a){var b=this._stroke,c=this.endStrokeFn,d=this.context,e=this.changed;return setTimeout(function(){c.call(d,b),e.call(d)},3),!0}return null}}function e(b,d,e){var i=this.$parent=$(b),b=this.eventTokens={};this.events=new h(this);var j=$.fn[f]("globalEvents"),k={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};$.extend(k,a(i)),d&&$.extend(k,d),this.settings=k;for(var l in e)e.hasOwnProperty(l)&&e[l].call(this,l);this.events.publish(f+".initializing"),this.$controlbarUpper=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(i),this.isCanvasEmulator=!1,e=this.canvas=this.initializeCanvas(k),d=$(e),this.$controlbarLower=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(i),this.canvasContext=e.getContext("2d"),d.data(f+".this",this),i=(i=k.lineWidth)?i:Math.max(Math.round(e.width/400),2),k.lineWidth=i,this.lineCurveThreshold=3*k.lineWidth,k.cssclass&&""!=$.trim(k.cssclass)&&d.addClass(k.cssclass),this.fatFingerCompensation=0;var i=function(a){var b,d,e=function(e){return e=e.changedTouches&&0<e.changedTouches.length?e.changedTouches[0]:e,new c(Math.round(e.pageX+b),Math.round(e.pageY+d)+a.fatFingerCompensation)},f=new g(750,function(){a.dataEngine.endStroke()});return this.drawEndHandler=function(b){try{b.preventDefault()}catch(a){}f.clear(),a.dataEngine.endStroke()},this.drawStartHandler=function(c){c.preventDefault();var g=$(a.canvas).offset();b=-1*g.left,d=-1*g.top,a.dataEngine.startStroke(e(c)),f.kick()},this.drawMoveHandler=function(b){b.preventDefault(),a.dataEngine.inStroke&&(a.dataEngine.addToStroke(e(b)),f.kick())},this}.call({},this),m=i.drawEndHandler,n=i.drawStartHandler,o=i.drawMoveHandler,p=this.canvas,d=$(p);this.isCanvasEmulator?(d.bind("mousemove."+f,o),d.bind("mouseup."+f,m),d.bind("mousedown."+f,n)):(p.ontouchstart=function(a){p.onmousedown=void 0,p.onmouseup=void 0,p.onmousemove=void 0,this.fatFingerCompensation=k.minFatFingerCompensation&&-3*k.lineWidth>k.minFatFingerCompensation?-3*k.lineWidth:k.minFatFingerCompensation,n(a),p.ontouchend=m,p.ontouchstart=n,p.ontouchmove=o},p.onmousedown=function(a){p.ontouchstart=void 0,p.ontouchend=void 0,p.ontouchmove=void 0,n(a),p.onmousedown=n,p.onmouseup=m,p.onmousemove=o}),b[f+".windowmouseup"]=j.subscribe(f+".windowmouseup",i.drawEndHandler),this.events.publish(f+".attachingEventHandlers");var q=this,b=k.width.toString(10),r=f;return"ratio"!==b&&"%"!==b.split("")[b.length-1]||(this.eventTokens[r+".parentresized"]=j.subscribe(r+".parentresized",function(a,b,c){return function(){var d=b.width();if(d!==c){for(var e in a)a.hasOwnProperty(e)&&(j.unsubscribe(a[e]),delete a[e]);var f=q.settings;q.$parent.children().remove();for(e in q)q.hasOwnProperty(e)&&delete q[e];e=f.data;var h,i,k,l,m,n,d=1*d/c,g=[];for(i=0,k=e.length;i<k;i++){for(n=e[i],h={x:[],y:[]},l=0,m=n.x.length;l<m;l++)h.x.push(n.x[l]*d),h.y.push(n.y[l]*d);g.push(h)}f.data=g,b[r](f)}}}(this.eventTokens,this.$parent,this.$parent.width(),(this.canvas.width,this.canvas.height)))),this.resetCanvas(k.data),this.events.publish(f+".initialized"),this}var f="jSignature",g=function(a,b){var c;return this.kick=function(){clearTimeout(c),c=setTimeout(b,a)},this.clear=function(){clearTimeout(c)},this},h=function(a){this.topics={},this.context=a||this,this.publish=function(a,b,c,d){if(this.topics[a]){var h,i,j,k,e=this.topics[a],f=Array.prototype.slice.call(arguments,1),g=[];for(i=0,j=e.length;i<j;i++)k=e[i],h=k[0],k[1]&&(k[0]=function(){},g.push(i)),h.apply(this.context,f);for(i=0,j=g.length;i<j;i++)e.splice(g[i],1)}},this.subscribe=function(a,b,c){return this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]],{topic:a,callback:b}},this.unsubscribe=function(a){if(this.topics[a.topic])for(var b=this.topics[a.topic],c=0,d=b.length;c<d;c++)b[c][0]===a.callback&&b.splice(c,1)}},i=function(a){var b=this.canvasContext,c=a.x[0],a=a.y[0],d=this.settings.lineWidth,e=b.fillStyle;b.fillStyle=b.strokeStyle,b.fillRect(c+d/-2,a+d/-2,d,d),b.fillStyle=e},j=function(a,d){var e=new c(a.x[d-1],a.y[d-1]),f=new c(a.x[d],a.y[d]),g=e.getVectorToPoint(f);if(1<d){var j,h=new c(a.x[d-2],a.y[d-2]),i=h.getVectorToPoint(e);if(i.getLength()>this.lineCurveThreshold){j=2<d?new c(a.x[d-3],a.y[d-3]).getVectorToPoint(h):new b(0,0);var k=.35*i.getLength(),l=i.angleTo(j.reverse()),m=g.angleTo(i.reverse());j=new b(j.x+i.x,j.y+i.y).resizeTo(Math.max(.05,l)*k);var n=new b(i.x+g.x,i.y+g.y).reverse().resizeTo(Math.max(.05,m)*k),i=this.canvasContext,k=h.x,m=h.y,l=e.x,o=e.y,p=h.x+j.x,h=h.y+j.y;j=e.x+n.x,n=e.y+n.y,i.beginPath(),i.moveTo(k,m),i.bezierCurveTo(p,h,j,n,l,o),i.stroke()}}g.getLength()<=this.lineCurveThreshold&&(g=this.canvasContext,h=e.x,e=e.y,j=f.x,f=f.y,g.beginPath(),g.moveTo(h,e),g.lineTo(j,f),g.stroke())},k=function(a){var d=a.x.length-1;if(0<d){var e=new c(a.x[d],a.y[d]),f=new c(a.x[d-1],a.y[d-1]),g=f.getVectorToPoint(e);if(g.getLength()>this.lineCurveThreshold){if(1<d){var a=new c(a.x[d-2],a.y[d-2]).getVectorToPoint(f),h=new b(a.x+g.x,a.y+g.y).resizeTo(g.getLength()/2),g=this.canvasContext,a=f.x,d=f.y,i=e.x,j=e.y,k=f.x+h.x,f=f.y+h.y,h=e.x,e=e.y;g.beginPath(),g.moveTo(a,d),g.bezierCurveTo(k,f,h,e,i,j)}else g=this.canvasContext,a=f.x,f=f.y,d=e.x,e=e.y,g.beginPath(),g.moveTo(a,f),g.lineTo(d,e);g.stroke()}}};e.prototype.resetCanvas=function(a){var b=this.canvas,c=this.settings,e=this.canvasContext,g=this.isCanvasEmulator,h=b.width,l=b.height;e.clearRect(0,0,h+30,l+30),e.shadowColor=e.fillStyle=c["background-color"],g&&e.fillRect(0,0,h+30,l+30),e.lineWidth=Math.ceil(parseInt(c.lineWidth,10)),e.lineCap=e.lineJoin="round",e.strokeStyle=c["decor-color"],e.shadowOffsetX=0,e.shadowOffsetY=0;var m=Math.round(l/5),n=1.5*m,o=l-m,h=h-1.5*m,l=l-m;e.beginPath(),e.moveTo(n,o),e.lineTo(h,l),e.stroke(),e.strokeStyle=c.color,g||(e.shadowColor=e.strokeStyle,e.shadowOffsetX=.5*e.lineWidth,e.shadowOffsetY=-.6*e.lineWidth,e.shadowBlur=0),a||(a=[]),e=this.dataEngine=new d(a,this,i,j,k),c.data=a,$(b).data(f+".data",a).data(f+".settings",c);var p=this.$parent,q=this.events,r=f;return e.changed=function(){q.publish(r+".change"),p.trigger("change")},e.changed(),!0},e.prototype.initializeCanvas=function(a){var b=document.createElement("canvas"),c=$(b);if(a.width===a.height&&"ratio"===a.height&&(a.width="100%"),c.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==a.height&&a.height?a.height.toString(10):1).css("width","ratio"!==a.width&&a.width?a.width.toString(10):1),c.appendTo(this.$parent),"ratio"===a.height?c.css("height",Math.round(c.width()/a.sizeRatio)):"ratio"===a.width&&c.css("width",Math.round(c.height()*a.sizeRatio)),c.addClass(f),b.width=c.width(),b.height=c.height(),a=b,a.getContext)a=!1;else{var c=a.ownerDocument.parentWindow,d=c.FlashCanvas?a.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(!d)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");if(a=d.initElement(a),d=1,c&&c.screen&&c.screen.deviceXDPI&&c.screen.logicalXDPI&&(d=1*c.screen.deviceXDPI/c.screen.logicalXDPI),1!==d)try{$(a).children("object").get(0).resize(Math.ceil(a.width*d),Math.ceil(a.height*d)),a.getContext("2d").scale(d,d)}catch(a){}a=!0}return this.isCanvasEmulator=a,b.onselectstart=function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1},b};var r,l=window,m=function(a,b){var c=new Image,d=this;c.onload=function(){d.getContext("2d").drawImage(c,0,0,c.width<d.width?c.width:d.width,c.height<d.height?c.height:d.height)},c.src="data:"+b+","+a},n=function(a){return this.find("canvas."+f).add(this.filter("canvas."+f)).data(f+".this").resetCanvas(a),this},o=function(a,b){if(void 0!==b||"string"!=typeof a||"data:"!==a.substr(0,5)||(b=a.slice(5).split(",")[0],a=a.slice(6+b.length),b!==a)){var c=this.find("canvas."+f).add(this.filter("canvas."+f));if(!v.hasOwnProperty(b))throw Error(f+" is unable to find import plugin with for format '"+String(b)+"'");return 0!==c.length&&v[b].call(c[0],a,b,function(a){return function(){return a.resetCanvas.apply(a,arguments)}}(c.data(f+".this"))),this}},p=new h,q=f,s=function(){p.publish(q+".parentresized")};$(l).bind("resize."+q,function(){r&&clearTimeout(r),r=setTimeout(s,500)}).bind("mouseup."+q,function(){p.publish(q+".windowmouseup")});var t={},u={default:function(){return this.toDataURL()},native:function(a){return a},image:function(){var a=this.toDataURL();if("string"==typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var b=a.indexOf(",");return[a.slice(5,b),a.substr(b+1)]}return[]}},v={native:function(a,b,c){c(a)},image:m,"image/png;base64":m,"image/jpeg;base64":m,"image/jpg;base64":m},w={export:u,import:v,instance:t},x={init:function(a){return this.each(function(){var b,c=!1;for(b=this.parentNode;b&&!c;)c=b.body,b=b.parentNode;!c||new e(this,a,t)})},getSettings:function(){return this.find("canvas."+f).add(this.filter("canvas."+f)).data(f+".this").settings},clear:n,reset:n,addPlugin:function(a,b,c){return w.hasOwnProperty(a)&&(w[a][b]=c),this},listPlugins:function(a){var b=[];if(w.hasOwnProperty(a)){var c,a=w[a];for(c in a)a.hasOwnProperty(c)&&b.push(c)}return b},getData:function(a){var b=this.find("canvas."+f).add(this.filter("canvas."+f));if(void 0===a&&(a="default"),0!==b.length&&u.hasOwnProperty(a))return u[a].call(b.get(0),b.data(f+".data"))},importData:o,setData:o,globalEvents:function(){return p},events:function(){return this.find("canvas."+f).add(this.filter("canvas."+f)).data(f+".this").events}};$.fn[f]=function(a){return a&&"object"!=typeof a?"string"==typeof a&&x[a]?x[a].apply(this,Array.prototype.slice.call(arguments,1)):void $.error("Method "+String(a)+" does not exist on jQuery."+f):x.init.apply(this,arguments)}}(),function(){$.fn.jSignature("addPlugin","instance","UndoButton",function(a){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[a]){var b=this.settings[a];"function"!=typeof b&&(b=function(){var a=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),b=a.width();return a.css("left",Math.round((this.canvas.width-b)/2)),b!==a.width()&&a.width(b),a});var c=b.call(this),d=this;d.events.subscribe("jSignature.change",function(){d.dataEngine.data.length?c.show():c.hide()});var e=this,f=(this.events.topics.hasOwnProperty("jSignature.undo")?a:"jSignature")+".undo";c.bind("click",function(){e.events.publish(f)}),e.events.subscribe(f,function(){var a=e.dataEngine.data;a.length&&(a.pop(),e.resetCanvas(a))})}})})}(),function(){for(var a={},b={},c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),d=c.length/2,e=d-1;-1<e;e--)a[c[e]]=c[e+d],b[c[e+d]]=c[e];var f=function(b){for(var b=b.split(""),c=b.length,d=1;d<c;d++)b[d]=a[b[d]];return b.join("")},g=function(a){if(a){for(var h,i,b=[],c=0,e=1,g=a.length,j=0;j<g;j++)h=Math.round(a[j]),i=h-c,c=h,0>i&&0<e?(e=-1,b.push("Z")):0<i&&0>e&&(e=1,b.push("Y")),h=Math.abs(i),h>=d?b.push(f(h.toString(d))):b.push(h.toString(d));return b.join("")}return""},h=function(c){if(c){for(var g,e=[],c=c.split(""),f=c.length,h=1,i=[],j=0,k=0;k<f;k++)g=c[k],g in a||"Z"===g||"Y"===g?(0!==i.length&&(i=parseInt(i.join(""),d)*h+j,e.push(i),j=i),"Z"===g?(h=-1,i=[]):"Y"===g?(h=1,i=[]):i=[g]):i.push(b[g]);e.push(parseInt(i.join(""),d)*h+j)}return e},i=function(a){for(var d,b=[],c=a.length,e=0;e<c;e++)d=a[e],b.push(g(d.x)),b.push(g(d.y));return b.join("_")},j=function(a){for(var b=[],a=a.split("_"),c=a.length/2,d=0;d<c;d++)b.push({x:h(a[2*d]),y:h(a[2*d+1])});return b},c=function(a){return["image/jsignature;base30",i(a)]},e=function(a,b,c){"string"==typeof a&&("image/jsignature;base30"===a.substring(0,23).toLowerCase()&&(a=a.substring(24)),c(j(a)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var k=this.jQuery.fn.jSignature;k("addPlugin","export","base30",c),k("addPlugin","export","image/jsignature;base30",c),k("addPlugin","import","base30",e),k("addPlugin","import","image/jsignature;base30",e),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:f,compressstrokeleg:g,uncompressstrokeleg:h,compressstrokes:i,uncompressstrokes:j,charmap:a})}.call("undefined"!=typeof window?window:this),function(){function a(a,b){this.x=a,this.y=b,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var c=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*c(this.y);else if(0===this.y)this._length=a,this.x=a*c(this.x);else{var b=Math.abs(this.y/this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a,this.x=d*c(this.x),this.y=b*c(this.y)}return this},this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/b,-1),1))/Math.PI}}function b(b,c){this.x=b,this.y=c,this.getVectorToCoordinates=function(b,c){return new a(b-this.x,c-this.y)},this.getVectorFromCoordinates=function(a,b){return this.getVectorToCoordinates(a,b).reverse()},this.getVectorToPoint=function(b){return new a(b.x-this.x,b.y-this.y)},this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function c(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function d(d,e,f){var e=e+1,g=new b(d.x[e-1],d.y[e-1]),h=new b(d.x[e],d.y[e]),h=g.getVectorToPoint(h),i=new b(d.x[e-2],d.y[e-2]),g=i.getVectorToPoint(g);return g.getLength()>f?(f=2<e?new b(d.x[e-3],d.y[e-3]).getVectorToPoint(i):new a(0,0),d=.35*g.getLength(),i=g.angleTo(f.reverse()),e=h.angleTo(g.reverse()),f=new a(f.x+g.x,f.y+g.y).resizeTo(Math.max(.05,i)*d),h=new a(g.x+h.x,g.y+h.y).reverse().resizeTo(Math.max(.05,e)*d),h=new a(g.x+h.x,g.y+h.y),["c",c(f.x,2),c(f.y,2),c(h.x,2),c(h.y,2),c(g.x,2),c(g.y,2)]):["l",c(g.x,2),c(g.y,2)]}function e(d,e){var f=d.x.length-1,g=new b(d.x[f],d.y[f]),h=new b(d.x[f-1],d.y[f-1]),g=h.getVectorToPoint(g);if(1<f&&g.getLength()>e){var f=new b(d.x[f-2],d.y[f-2]).getVectorToPoint(h),h=g.angleTo(f.reverse()),i=.35*g.getLength(),f=new a(f.x+g.x,f.y+g.y).resizeTo(Math.max(.05,h)*i);return["c",c(f.x,2),c(f.y,2),c(g.x,2),c(g.y,2),c(g.x,2),c(g.y,2)]}return["l",c(g.x,2),c(g.y,2)]}function f(a,b,f){for(var b=["M",c(a.x[0]-b,2),c(a.y[0]-f,2)],f=1,g=a.x.length-1;f<g;f++)b.push.apply(b,d(a,f,1));return 0<g?b.push.apply(b,e(a,f,1)):0===g&&b.push.apply(b,["l",1,1]),b.join(" ")}function g(a){var c,e,b=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],d=a.length,g=[],h=[],i=e=c=0,j=0,k=[];if(0!==d){for(c=0;c<d;c++){i=a[c],j=[],e={x:[],y:[]};for(var l=void 0,m=void 0,l=0,m=i.x.length;l<m;l++)j.push({x:i.x[l],y:i.y[l]});for(j=simplify(j,.7,!0),l=0,m=j.length;l<m;l++)e.x.push(j[l].x),e.y.push(j[l].y);k.push(e),g=g.concat(e.x),h=h.concat(e.y)}a=Math.min.apply(null,g)-1,d=Math.max.apply(null,g)+1,g=Math.min.apply(null,h)-1,h=Math.max.apply(null,h)+1,i=0>a?0:a,j=0>g?0:g,c=d-a,e=h-g}for(b.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+c.toString()+'" height="'+e.toString()+'">'),c=0,d=k.length;c<d;c++)e=k[c],b.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+f(e,i,j)+'"/>');return b.push("</svg>"),b.join("")}function h(a){return[l,g(a)]}function i(a){return[m,k(g(a))]}var j=window;if(("undefined"!=typeof exports?exports:j).simplify=function(a,b,c){if(b=void 0!==b?b*b:1,!c){for(var e,d=a.length,f=a[0],g=[f],c=1;c<d;c++){e=a[c];var h=e.x-f.x,i=e.y-f.y;h*h+i*i>b&&(g.push(e),f=e)}f!==e&&g.push(e),a=g}e=a;var j,k,c=e.length,d=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(c),f=0,g=c-1,l=[],m=[],n=[];for(d[f]=d[g]=1;g;){for(i=0,h=f+1;h<g;h++){j=e[h];var o=e[f],p=e[g],q=o.x,r=o.y,o=p.x-q,s=p.y-r,t=void 0;0===o&&0===s||(t=((j.x-q)*o+(j.y-r)*s)/(o*o+s*s),1<t?(q=p.x,r=p.y):0<t&&(q+=o*t,r+=s*t)),o=j.x-q,s=j.y-r,j=o*o+s*s,j>i&&(k=h,i=j)}i>b&&(d[k]=1,l.push(f),m.push(k),l.push(k),m.push(g)),f=l.pop(),g=m.pop()}for(h=0;h<c;h++)d[h]&&n.push(e[h]);return a=n},"function"!=typeof k)var k=function(a){var c,d,e,f,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),g=0,h=0,i="",i=[];do{c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=a.charCodeAt(g++),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,i[h++]=b[c]+b[d]+b[e]+b[f]}while(g<a.length);return i=i.join(""),a=a.length%3,(a?i.slice(0,a-3):i)+"===".slice(a||3)};var l="image/svg+xml",m="image/svg+xml;base64";if("undefined"==typeof $)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");j=$.fn.jSignature,j("addPlugin","export","svg",h),j("addPlugin","export",l,h),j("addPlugin","export","svgbase64",i),j("addPlugin","export",m,i)}();